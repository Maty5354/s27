<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#6196ff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Orar 8A</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <!-- OverlayScrollbars CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/2.3.0/styles/overlayscrollbars.min.css" />
    <script src="https://kit.webawesome.com/45396e3eb4054c87.js" crossorigin="anonymous"></script>
    <!-- OverlayScrollbars JS -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/2.3.0/browser/overlayscrollbars.browser.es6.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css" />
    <base target="_blank">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/customization.css">
    <link rel="stylesheet" href="../css/mobile.css">
    <link rel="stylesheet" href="../css/overlays.css">
    <link rel="stylesheet" href="../css/timetable.css">
    <link rel="stylesheet" href="../css/todo.css">
    <link rel="stylesheet" href="../css/weather.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/variables.css">

    <script>
        window.CLASS_ID = '8a';
        window.DATA_PATH = '../data/';
    </script>
</head>

<body>
    <!-- New Sticky Mobile Header -->
    <header id="mobileHeader" class="mobile-header">
        <div class="mobile-header-content">
            <h1 class="mobile-app-title">Orar 8A</h1>
            <div class="mobile-header-info">
                <span id="mobileHeaderTime">--:--</span>
                <span id="mobileHeaderDate">-- --</span>
            </div>
        </div>
    </header>

    <button id="menuToggle" class="menu-toggle" aria-label="Toggle Menu">
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </button>
    <div class="title-container">
        <h1 class="main-title">Orar 8A</h1>
        <div class="header-info-wrapper">
            <div class="time-display" id="titleTime">00:00:00</div>
            <div class="date-display" id="titleDate"></div>
        </div>
    </div>
    <canvas id="canvas"></canvas>
    <div id="scroll-indicator-bg">
        <div id="scroll-indicator"></div>
    </div>
    <div class="biggest-container">
        <div class="header">
            <div id="sideMenu" class="side-menu">

                <h1 class="menu-title">Menu</h1>

                <button id="customizationBtn" class="menu-btn">
                    <i class="fa-solid fa-sliders"></i>
                    <span>Customization</span>
                </button>

                <button id="weatherBtn" class="menu-btn weather-menu-btn">
                    <div class="weather-btn-content">
                        <span id="menuWeatherEmoji" class="menu-weather-emoji">‚òÅÔ∏è</span>
                        <div class="weather-btn-text">
                            <span class="weather-btn-label">Weather</span>
                            <span id="menuWeatherTemp" class="menu-weather-temp">--¬∞C</span>
                        </div>
                    </div>
                </button>

                <button id="allManualsBtn" class="menu-btn">
                    <i class="fa-solid fa-book"></i>
                    <span>All Textbooks</span>
                </button>

                <button id="clockBtn" class="menu-btn">
                    <i class="fa-solid fa-clock"></i>
                    <span>Clock</span>
                </button>

                <button id="todoBtn" class="menu-btn">
                    <i class="fa-solid fa-list-check"></i>
                    <span>My Tasks</span>
                </button>

                <button id="infoBtn" class="menu-btn">
                    <i class="fa-solid fa-circle-info"></i>
                    <span>Info</span>
                </button>
                <div id="recommendedManual" class="recommended-manual">
                    <h3>Recommended Textbook</h3>
                    <div class="manual-card">
                        <p>No textbook available</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="big-container">
            <!-- Full View Header (Mobile Only) - Moved out for sticky positioning -->
            <div class="full-view-header" id="fullViewHeader">
                <h2 class="full-view-title"><i class="fa-solid fa-table-cells"></i> Weekly Schedule</h2>
            </div>

            <div class="timetable-wrapper">
                <table class="timetable" id="timetable">
                    <thead>
                        <tr>
                            <th style="width: 10rem !important; height: 3rem !important;"></th>
                            <th style="text-transform: uppercase;">Luni</th>
                            <th style="text-transform: uppercase;">Mar»õi</th>
                            <th style="text-transform: uppercase;">Miercuri</th>
                            <th style="text-transform: uppercase;">Joi</th>
                            <th style="text-transform: uppercase;">Vineri</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

            </div>
        </div>




    </div>
    <!-- Time Overlay -->
    <div id="timeOverlay" class="time-overlay">
        <div class="overlay-content">
            <button id="closeOverlay" class="close-btn"><i class="fa-solid fa-xmark"></i></button>
            <div id="clockDisplay">
                <div id="time"></div>
                <div id="date"></div>
            </div>
        </div>
    </div>


    <!--menu overlay-->
    <div id="overlay"></div>

    <!-- Advanced To-Do System Overlay -->
    <div id="advancedTodoOverlay" class="advanced-todo-overlay">
        <div class="advanced-todo-container">
            <!-- Sidebar -->
            <div class="todo-sidebar" id="todoSidebar">
                <div class="sidebar-header">
                    <button id="toggleSidebar" class="toggle-sidebar-btn" aria-label="Toggle Sidebar">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                    <h2><i class="fa-solid fa-list-check"></i> Tasks</h2>
                </div>

                <!-- Stats -->
                <div class="todo-stats-compact">
                    <div class="stat-compact">
                        <div class="stat-number" id="statTotal">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-compact">
                        <div class="stat-number" id="statCompleted">0</div>
                        <div class="stat-label">Done</div>
                    </div>
                    <div class="stat-compact">
                        <div class="stat-number" id="statPending">0</div>
                        <div class="stat-label">Pending</div>
                    </div>
                </div>

                <!-- Folders Section -->
                <div class="sidebar-section">
                    <div class="section-header">
                        <h3><i class="fa-solid fa-folder"></i> Folders</h3>
                        <button class="icon-btn" id="addFolderBtn" title="Add Folder">
                            <i class="fa-solid fa-plus"></i>
                        </button>
                    </div>
                    <div class="folders-list" id="foldersList">
                        <!-- Folders will be rendered here -->
                    </div>
                </div>

                <!-- Quick Filters -->
                <div class="sidebar-section">
                    <h3><i class="fa-solid fa-filter"></i> Quick Filters</h3>
                    <div class="quick-filters">
                        <button class="quick-filter active" data-filter="all">
                            <i class="fa-solid fa-list"></i> <span>All Tasks</span>
                        </button>
                        <button class="quick-filter" data-filter="today">
                            <i class="fa-solid fa-calendar-day"></i> <span>Today</span>
                        </button>
                        <button class="quick-filter" data-filter="week">
                            <i class="fa-solid fa-calendar-week"></i> <span>This Week</span>
                        </button>
                        <button class="quick-filter" data-filter="overdue">
                            <i class="fa-solid fa-exclamation-triangle"></i> <span>Overdue</span>
                        </button>
                        <button class="quick-filter" data-filter="completed">
                            <i class="fa-solid fa-check-circle"></i> <span>Completed</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="todo-main-content">
                <!-- Header -->
                <div class="todo-content-header">
                    <button id="closeTodoOverlay" class="close-btn">
                        <i class="fa-solid fa-xmark"></i>
                    </button>

                    <div class="header-left">
                        <h1 id="currentViewTitle">All Tasks</h1>
                        <span class="task-count" id="currentTaskCount">0 tasks</span>
                    </div>

                    <div class="header-actions">
                        <div class="search-container">
                            <i class="fa-solid fa-search"></i>
                            <input type="text" id="taskSearch" placeholder="Search tasks..." />
                        </div>

                        <div class="view-switcher">
                            <button class="view-btn active" data-view="list" title="List View">
                                <i class="fa-solid fa-list"></i>
                            </button>
                            <button class="view-btn" data-view="calendar" title="Calendar View">
                                <i class="fa-solid fa-calendar"></i>
                            </button>
                        </div>

                        <div class="dropdown-container">
                            <button class="dropdown-btn" id="sortBtn">
                                <i class="fa-solid fa-sort"></i> Sort
                            </button>
                            <div class="dropdown-menu" id="sortMenu">
                                <button class="dropdown-item" data-sort="manual">
                                    <i class="fa-solid fa-hand"></i> Manual Order
                                </button>
                                <button class="dropdown-item" data-sort="priority">
                                    <i class="fa-solid fa-flag"></i> Priority
                                </button>
                                <button class="dropdown-item" data-sort="dueDate">
                                    <i class="fa-solid fa-calendar"></i> Due Date
                                </button>
                                <button class="dropdown-item" data-sort="created">
                                    <i class="fa-solid fa-clock"></i> Date Created
                                </button>
                                <button class="dropdown-item" data-sort="name">
                                    <i class="fa-solid fa-font"></i> Name
                                </button>
                            </div>
                        </div>

                        <div class="dropdown-container">
                            <button class="dropdown-btn" id="filterBtn">
                                <i class="fa-solid fa-filter"></i> Filter
                            </button>
                            <div class="dropdown-menu" id="filterMenu">
                                <div class="filter-section">
                                    <h4>Priority</h4>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="priority" value="very-high" checked>
                                        <span><i class="fa-solid fa-flag" style="color: #dc2626;"></i> Very High</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="priority" value="high" checked>
                                        <span><i class="fa-solid fa-flag" style="color: #ea580c;"></i> High</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="priority" value="medium" checked>
                                        <span><i class="fa-solid fa-flag" style="color: #f59e0b;"></i> Medium</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="priority" value="low" checked>
                                        <span><i class="fa-solid fa-flag" style="color: #10b981;"></i> Low</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="priority" value="very-low" checked>
                                        <span><i class="fa-solid fa-flag" style="color: #3b82f6;"></i> Very Low</span>
                                    </label>
                                </div>
                                <div class="filter-section">
                                    <h4>Status</h4>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="status" value="pending" checked>
                                        <span>Pending</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" data-filter="status" value="completed" checked>
                                        <span>Completed</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Task FAB -->
                <button class="add-task-btn" id="addTaskBtn">
                    <i class="fa-solid fa-plus"></i> <span>New Task</span>
                </button>

                <!-- Content Area -->
                <div class="todo-content-area">
                    <!-- List View -->
                    <div class="list-view active" id="listView">
                        <div class="tasks-container" id="tasksContainer">
                            <!-- Tasks will be rendered here -->
                        </div>
                        <div class="empty-state" id="emptyState">
                            <i class="fa-solid fa-inbox"></i>
                            <h3>No tasks found</h3>
                            <p>Create a new task to get started!</p>
                        </div>
                    </div>

                    <!-- Calendar View -->
                    <div class="calendar-view" id="calendarView">
                        <div class="calendar-header">
                            <button class="calendar-nav-btn" id="prevMonth">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>
                            <h3 id="calendarMonth">January 2026</h3>
                            <button class="calendar-nav-btn" id="nextMonth">
                                <i class="fa-solid fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div class="task-edit-modal" id="taskEditModal">
        <div class="task-edit-container">
            <div class="task-edit-header">
                <h2 id="taskEditTitle"><i class="fa-solid fa-plus"></i> New Task</h2>
                <button class="close-btn" id="closeTaskEdit">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="task-edit-content">
                <!-- Title -->
                <div class="form-group-edit">
                    <label for="editTaskTitle">Title *</label>
                    <input type="text" id="editTaskTitle" placeholder="What needs to be done?" maxlength="200" required>
                </div>

                <!-- Folder Selection -->
                <div class="form-group-edit">
                    <label for="editTaskFolder">Folder</label>
                    <select id="editTaskFolder">
                        <option value="">No Folder</option>
                    </select>
                </div>

                <!-- Description -->
                <div class="form-group-edit">
                    <label for="editTaskDescription">Description</label>
                    <textarea id="editTaskDescription" placeholder="Add more details..." rows="4"></textarea>
                </div>

                <!-- Attachments -->
                <div class="form-group-edit">
                    <label>Attachments</label>
                    <div class="attachments-area">
                        <button class="add-attachment-btn" id="addAttachmentBtn">
                            <i class="fa-solid fa-paperclip"></i> Add Attachment
                        </button>
                        <input type="file" id="attachmentInput" multiple style="display: none;">
                        <div class="attachments-list" id="attachmentsList"></div>
                    </div>
                </div>

                <!-- Priority & Difficulty -->
                <div class="form-row">
                    <div class="form-group-edit">
                        <label>Priority</label>
                        <div class="priority-flags">
                            <button class="priority-flag" data-priority="very-high" title="Very High">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                            <button class="priority-flag" data-priority="high" title="High">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                            <button class="priority-flag active" data-priority="medium" title="Medium">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                            <button class="priority-flag" data-priority="low" title="Low">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                            <button class="priority-flag" data-priority="very-low" title="Very Low">
                                <i class="fa-solid fa-flag"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group-edit">
                        <label for="editTaskDifficulty">Difficulty</label>
                        <select id="editTaskDifficulty">
                            <option value="very-easy">Very Easy</option>
                            <option value="easy">Easy</option>
                            <option value="medium" selected>Medium</option>
                            <option value="hard">Hard</option>
                            <option value="very-hard">Very Hard</option>
                        </select>
                    </div>
                </div>

                <!-- Due Date & Reminders -->
                <div class="form-group-edit">
                    <label for="editTaskDueDate">Due Date</label>
                    <input type="datetime-local" id="editTaskDueDate">
                </div>

                <div class="form-group-edit">
                    <label>Reminders</label>
                    <div class="reminders-area">
                        <button class="add-reminder-btn" id="addReminderBtn">
                            <i class="fa-solid fa-bell"></i> Add Reminder
                        </button>
                        <div class="reminders-list" id="remindersList"></div>
                    </div>
                </div>

                <!-- Repeating Task -->
                <div class="form-group-edit">
                    <label class="toggle-label">
                        <input type="checkbox" id="editTaskRepeating">
                        <span>Repeating Task</span>
                    </label>
                    <div class="repeating-options" id="repeatingOptions" style="display: none;">
                        <select id="editTaskRepeatInterval">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="biweekly">Every 2 Weeks</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                </div>

                <!-- Subtasks -->
                <div class="form-group-edit">
                    <label>Subtasks</label>
                    <div class="subtasks-area">
                        <div class="add-subtask-input">
                            <input type="text" id="subtaskInput" placeholder="Add a subtask..." maxlength="100">
                            <button id="addSubtaskBtn">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div class="subtasks-list" id="subtasksList"></div>
                    </div>
                </div>
            </div>

            <div class="task-edit-footer">
                <button class="btn-secondary" id="cancelTaskEdit">Cancel</button>
                <button class="btn-primary" id="saveTaskEdit">Save Task</button>
            </div>
        </div>
    </div>

    <!-- Folder Edit Modal -->
    <div class="folder-edit-modal" id="folderEditModal">
        <div class="folder-edit-container">
            <div class="folder-edit-header">
                <h2 id="folderEditTitle"><i class="fa-solid fa-folder-plus"></i> New Folder</h2>
                <button class="close-btn" id="closeFolderEdit">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="folder-edit-content">
                <div class="form-group-edit">
                    <label for="editFolderName">Name *</label>
                    <input type="text" id="editFolderName" placeholder="Folder name" maxlength="50" required>
                </div>

                <div class="form-group-edit">
                    <label for="editFolderDescription">Description</label>
                    <textarea id="editFolderDescription" placeholder="Optional description" rows="2"></textarea>
                </div>

                <div class="form-group-edit">
                    <label>Color</label>
                    <div class="color-picker-grid">
                        <button class="color-option active" data-color="#6196ff" style="background: #6196ff;"></button>
                        <button class="color-option" data-color="#ef4444" style="background: #ef4444;"></button>
                        <button class="color-option" data-color="#f59e0b" style="background: #f59e0b;"></button>
                        <button class="color-option" data-color="#10b981" style="background: #10b981;"></button>
                        <button class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;"></button>
                        <button class="color-option" data-color="#ec4899" style="background: #ec4899;"></button>
                        <button class="color-option" data-color="#14b8a6" style="background: #14b8a6;"></button>
                        <button class="color-option" data-color="#f97316" style="background: #f97316;"></button>
                    </div>
                </div>

                <div class="form-group-edit">
                    <label>Icon</label>
                    <div class="icon-picker-grid" id="iconPickerGrid">
                        <!-- Icons will be rendered here -->
                    </div>
                </div>
            </div>

            <div class="folder-edit-footer">
                <button class="btn-secondary" id="cancelFolderEdit">Cancel</button>
                <button class="btn-primary" id="saveFolderEdit">Save Folder</button>
            </div>
        </div>
    </div>

    <!-- Info Overlay -->
    <div id="infoOverlay" class="overlay">
        <div class="info-overlay-container">


            <div class="info-overlay-header">
                <h2><i class="fas fa-info-circle"></i> About Orar 8A</h2>
                <button id="closeInfoOverlay" class="close-btn"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <div class="info-content" data-simplebar>
                <h2>Schedules - Secondary School No. 27 from Bucharest</h2>
                <h2>2025-2026</h2>
                <h3></h3>
                <p>
                    Here you can quickly and easily find the complete timetable for several classes
                    from Secondary School No. 27 - always just one click away. The site comes with both
                    a light and a dark theme, so you can choose what you like best, plus a color picker
                    for extra customization. It's designed to be simple, useful, and elegant - so you
                    don't waste time looking through crumpled papers or random photos.
                </p>
                <p>
                    Keep in mind that this website isn't fully optimized for mobile devices yet.
                </p>
                <p>Controls:</p>
                <ul>
                    <li>Click on a subject = highlight it</li>
                    <li>Click outside the subject = remove highlight</li>
                    <li>Menu button = open/close side menu</li>
                    <li>Theme button = switch between light and dark mode</li>
                    <li>Color picker = choose a custom accent color</li>
                    <li>All Textbooks = view all textbooks for 8A</li>
                    <li>Clock = view current time and date</li>
                    <li>My Tasks = open the to-do list</li>
                </ul>

                <div class="release-notes-section">
                    <h2><i class="fa-solid fa-rocket"></i> Release Notes</h2>

                    <div class="release-note">
                        <div class="release-header">
                            <span class="release-version">v2.5.0</span>
                            <span class="release-date">November 2025</span>
                        </div>
                        <h4>Advanced Customization System</h4>
                        <ul>
                            <li>üé® New customization overlay with sidebar navigation</li>
                            <li>üåà 12 beautiful theme presets (Space, Midnight, Sunset, Forest, Ocean, Lavender, Rose,
                                and more)</li>
                            <li>üé® Custom color presets with hex input and randomizer</li>
                            <li>‚ö†Ô∏è Color contrast warnings for better accessibility</li>
                            <li>üî§ Font customization with 18+ Google Fonts</li>
                            <li>‚ûï Add custom Google Fonts feature</li>
                            <li>üíæ Save, export, and import customization presets</li>
                            <li>‚ú® Smooth transitions and animations throughout</li>
                        </ul>
                    </div>

                    <div class="release-note">
                        <div class="release-header">
                            <span class="release-version">v2.0.0</span>
                            <span class="release-date">October 2025</span>
                        </div>
                        <h4>Advanced To-Do System</h4>
                        <ul>
                            <li>‚úÖ Complete task management with priorities (High, Medium, Low)</li>
                            <li>üìÅ Custom categories for organization</li>
                            <li>üìÖ Deadline tracking with notifications</li>
                            <li>üîç Filter and sort tasks by multiple criteria</li>
                            <li>üìä Task statistics dashboard</li>
                            <li>üíæ Persistent storage across sessions</li>
                        </ul>
                    </div>

                    <div class="release-note">
                        <div class="release-header">
                            <span class="release-version">v1.5.0</span>
                            <span class="release-date">September 2025</span>
                        </div>
                        <h4>Enhanced Features</h4>
                        <ul>
                            <li>üìö Recommended textbook based on current class</li>
                            <li>üîç Search functionality for textbooks</li>
                            <li>‚è∞ Live clock overlay</li>
                            <li>üå§Ô∏è Weather information with location</li>
                            <li>üì± Improved mobile responsiveness</li>
                            <li>üéØ Better timetable highlighting</li>
                        </ul>
                    </div>

                    <div class="release-note">
                        <div class="release-header">
                            <span class="release-version">v1.0.0</span>
                            <span class="release-date">August 2025</span>
                        </div>
                        <h4>Initial Release</h4>
                        <ul>
                            <li>üìÖ Interactive timetable display</li>
                            <li>üåì Light and dark theme support</li>
                            <li>üé® Accent color customization</li>
                            <li>üìñ Quick access to textbooks</li>
                            <li>üìç Current class highlighting</li>
                            <li>üîÑ Real-time updates</li>
                        </ul>
                    </div>
                </div>

                <h3><a href="https://s27.ro/8a" target="_blank">Original 8A Schedule Website</a></h3>
                <h3><a href="https://manuale.edu.ro/" target="_blank">More Textbooks</a></h3>
            </div>
        </div>
    </div>

    <!-- Manuals Popup -->
    <div id="manualsPopup" class="manuals-popup">
        <button id="closeManualsPopup" class="close-btn"><i class="fa-solid fa-xmark"></i></button>
        <h2>All Textbooks</h2>
        <input type="text" id="manualSearch" placeholder="Search for a textbook...">
        <div class="boss-container" id="manualsPopupContent" data-simplebar>
            <!-- Manuals will be rendered here dynamically from manuals.json -->
        </div>
    </div>
    </div>
    <!-- Customization Overlay -->
    <div id="customizationOverlay" class="customization-overlay">
        <div class="customization-container">
            <button id="closeCustomization" class="close-btn" aria-label="Close"><i
                    class="fa-solid fa-xmark"></i></button>

            <!-- Sidebar -->
            <div class="custom-sidebar">
                <div class="sidebar-header">
                    <h2><i class="fa-solid fa-sliders"></i> Customize</h2>
                </div>
                <nav class="sidebar-nav">
                    <div class="sidebar-item active" data-section="theme">
                        <i class="fa-solid fa-moon"></i>
                        <span>Theme</span>
                    </div>
                    <div class="sidebar-item" data-section="color">
                        <i class="fa-solid fa-droplet"></i>
                        <span>Accent Color</span>
                    </div>
                    <div class="sidebar-item" data-section="font">
                        <i class="fa-solid fa-font"></i>
                        <span>Font</span>
                    </div>
                    <div class="sidebar-item" data-section="ui">
                        <i class="fa-solid fa-desktop"></i>
                        <span>Interface</span>
                    </div>
                    <div class="sidebar-item" data-section="a11y">
                        <i class="fa-solid fa-universal-access"></i>
                        <span>Access</span>
                    </div>
                    <div class="sidebar-item" data-section="advanced">
                        <i class="fa-solid fa-cog"></i>
                        <span>Advanced</span>
                    </div>
                    <div class="sidebar-item" data-section="presets">
                        <i class="fa-solid fa-bookmark"></i>
                        <span>Presets</span>
                    </div>
                </nav>
            </div>

            <!-- Content -->
            <div class="custom-content" data-simplebar>
                <!-- Theme Section -->
                <div class="custom-section active" id="themeSection">
                    <div class="section-header-custom">
                        <h3><i class="fa-solid fa-moon"></i> Theme Settings</h3>
                        <div class="theme-filters">
                            <input type="text" id="themeSearch" placeholder="Search themes..."
                                class="theme-search-input">
                            <div class="theme-tags">
                                <button class="theme-tag active" data-tag="all">All</button>
                                <button class="theme-tag" data-tag="light">Light</button>
                                <button class="theme-tag" data-tag="dark">Dark</button>
                            </div>
                        </div>
                    </div>
                    <div class="theme-options">
                        <!-- Theme cards will be rendered here dynamically from themes.json -->
                    </div>
                </div>
                <!-- Color Section -->
                <div class="custom-section" id="colorSection">
                    <h3><i class="fa-solid fa-droplet"></i> Accent Color</h3>

                    <!-- NEW: Contrast Warning -->
                    <div id="contrastWarning" class="contrast-warning" style="display: none;">
                        Warning message will appear here
                    </div>

                    <div class="color-section-content">
                        <div class="custom-color-picker-area">
                            <h4>Custom Color</h4>
                            <div class="color-picker-wrapper">
                                <div class="color-input-box">
                                    <input type="color" id="customColorPicker" value="#6196ff">
                                </div>
                                <input type="text" id="colorHexInput" class="color-hex-input" placeholder="#6196FF"
                                    maxlength="7">
                                <button class="add-preset-btn" id="addColorPreset">
                                    <i class="fa-solid fa-plus"></i>
                                    Add as Preset
                                </button>

                                <!-- Randomize accent color -->
                                <button class="add-preset-btn randomize-btn" id="randomColorBtn"
                                    title="Randomize accent color">
                                    <i class="fa-solid fa-dice"></i> Randomize
                                </button>
                            </div>
                        </div>

                        <div class="recommended-colors-area">
                            <h4>Recommended Colors</h4>
                            <div class="color-presets-grid" id="recommendedColorsGrid">
                                <!-- Generated JS -->
                            </div>
                        </div>

                        <div class="color-presets-area">
                            <h4>Color Presets</h4>
                            <div class="color-presets-grid" id="colorPresetsGrid">
                                <!-- Presets will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Font Section -->
                <div class="custom-section" id="fontSection">
                    <h3><i class="fa-solid fa-font"></i> Font Settings</h3>
                    <div class="font-options">
                        <div class="font-group">
                            <label for="fontSelect">Choose Font Family</label>
                            <div class="custom-select-wrapper">
                                <select id="fontSelect" class="font-select">
                                    <option value="'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif">Default (Segoe
                                        UI)</option>
                                    <option value="'Inter', sans-serif">Inter</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                    <option value="'Lato', sans-serif">Lato</option>
                                    <option value="'Montserrat', sans-serif">Montserrat</option>
                                    <option value="'Poppins', sans-serif">Poppins</option>
                                    <option value="'Raleway', sans-serif">Raleway</option>
                                    <option value="'Ubuntu', sans-serif">Ubuntu</option>
                                    <option value="'Nunito', sans-serif">Nunito</option>
                                    <option value="'Quicksand', sans-serif">Quicksand</option>
                                    <option value="'Outfit', sans-serif">Outfit</option>
                                    <option value="'DM Sans', sans-serif">DM Sans</option>
                                    <option value="'Space Grotesk', sans-serif">Space Grotesk</option>
                                    <option value="'Merriweather', serif">Merriweather</option>
                                    <option value="'Playfair Display', serif">Playfair Display</option>
                                    <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                                    <option value="'Fira Code', monospace">Fira Code</option>
                                </select>
                                <i class="fa-solid fa-chevron-down select-arrow"></i>
                            </div>
                        </div>

                        <!-- NEW: Add Custom Font Button -->
                        <button class="add-custom-font-btn" id="addCustomFont">
                            <i class="fa-solid fa-plus"></i>
                            Add Google Font
                        </button>

                        <div class="font-preview" id="fontPreview">
                            <p style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">The Quick Brown Fox
                            </p>
                            <p style="font-size: 1rem;">Jumps over the lazy dog. 0123456789</p>
                            <p style="font-size: 0.9rem; opacity: 0.8;">
                                AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz</p>
                        </div>
                    </div>
                </div>

                <!-- UI Section (Refactored to Tabs) -->
                <div class="custom-section" id="uiSection">
                    <h3><i class="fa-solid fa-desktop"></i> Interface Settings</h3>

                    <div class="custom-tabs ui-tabs">
                        <button class="ui-tab-btn active" data-tab="uiLayout">Layout</button>
                        <button class="ui-tab-btn" data-tab="uiTimetable">Timetable</button>
                        <button class="ui-tab-btn" data-tab="uiBackground">Background</button>
                    </div>

                    <div class="ui-content-wrapper active" id="uiLayoutContent">
                        <div class="ui-controls-grid">
                            <div class="ui-control-card">
                                <label>Border Radius</label>
                                <input type="range" id="uiBorderRadius" min="0" max="24" step="4" value="16">
                                <div class="range-labels">
                                    <span>Square</span>
                                    <span>Round</span>
                                </div>
                            </div>

                            <div class="ui-control-card">
                                <label>Glass Intensity</label>
                                <input type="range" id="uiGlassIntensity" min="0" max="100" step="10" value="80">
                                <div class="range-labels">
                                    <span>Solid</span>
                                    <span>Glass</span>
                                </div>
                            </div>

                            <div class="ui-control-card checkbox-card">
                                <div class="checkbox-info">
                                    <h4>Hide Nav on Scroll</h4>
                                    <p>Auto-hide mobile navigation</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="uiMobileNavScroll">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="ui-content-wrapper" id="uiTimetableContent">
                        <div class="ui-controls-grid">
                            <div class="ui-control-card checkbox-card">
                                <div class="checkbox-info">
                                    <h4>Compact Timetable</h4>
                                    <p>Reduce padding for smaller screens</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="uiCompactMode">
                                    <span class="slider round"></span>
                                </label>
                            </div>

                            <div class="ui-control-card checkbox-card">
                                <div class="checkbox-info">
                                    <h4>Minimal Cell Style</h4>
                                    <p>Remove borders from timetable cells</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="uiMinimalCells">
                                    <span class="slider round"></span>
                                </label>
                            </div>

                            <div class="ui-control-card checkbox-card">
                                <div class="checkbox-info">
                                    <h4>Hide Empty Days</h4>
                                    <p>Hide days with no classes</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="uiHideEmptyDays">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="ui-content-wrapper" id="uiBackgroundContent">
                        <div class="ui-controls-grid">
                            <div class="ui-control-card full-width">
                                <label>Background Image URL</label>
                                <div class="input-with-btn">
                                    <input type="text" id="uiBgImage" placeholder="https://example.com/image.jpg">
                                    <button id="uiBgClear" class="clear-btn"><i class="fa-solid fa-trash"></i></button>
                                </div>
                            </div>

                            <div class="ui-control-card checkbox-card full-width">
                                <div class="checkbox-info">
                                    <h4>Pattern Overlay</h4>
                                    <p>Add subtle pattern to background</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="uiBgPattern">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Accessibility Section (New) -->
                <div class="custom-section" id="a11ySection">
                    <h3><i class="fa-solid fa-universal-access"></i> Accessibility</h3>

                    <div class="ui-controls-grid">
                        <div class="ui-control-card checkbox-card">
                            <div class="checkbox-info">
                                <h4>High Contrast</h4>
                                <p>Maximum visibility colors</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="a11yHighContrast">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="ui-control-card checkbox-card">
                            <div class="checkbox-info">
                                <h4>Reduced Motion</h4>
                                <p>Disable non-essential animations</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="a11yReducedMotion">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="ui-control-card checkbox-card">
                            <div class="checkbox-info">
                                <h4>Focus Indicators</h4>
                                <p>Highlight focused elements</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="a11yFocusIndicators">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="ui-control-card checkbox-card">
                            <div class="checkbox-info">
                                <h4>Grayscale Mode</h4>
                                <p>Remove all colors</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="a11yGrayscale">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="ui-control-card full-width">
                            <label>Text Scaling</label>
                            <input type="range" id="a11yTextScale" min="0.8" max="1.5" step="0.1" value="1">
                            <div class="range-labels">
                                <span>Small</span>
                                <span>Normal</span>
                                <span>Large</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Presets Section -->
                <div class="custom-section" id="presetsSection">
                    <h3><i class="fa-solid fa-bookmark"></i> Customization Presets</h3>

                    <div class="presets-tabs custom-tabs">
                        <button class="preset-tab-btn active" data-tab="myPresets">My Presets</button>
                        <button class="preset-tab-btn" data-tab="gallery">Gallery</button>
                    </div>

                    <div class="presets-content-wrapper active" id="myPresetsContent">
                        <div class="presets-actions">
                            <button class="preset-action-btn" id="savePresetBtn">
                                <i class="fa-solid fa-floppy-disk"></i>
                                Save Current
                            </button>
                            <button class="preset-action-btn secondary" id="exportPresetBtn">
                                <i class="fa-solid fa-download"></i>
                                Export
                            </button>
                            <button class="preset-action-btn secondary" id="importPresetBtn">
                                <i class="fa-solid fa-upload"></i>
                                Import
                            </button>
                            <input type="file" id="importPresetFile" accept=".json" style="display: none;">
                        </div>

                        <div class="saved-presets" id="savedPresetsGrid">
                            <!-- Saved presets will appear here -->
                        </div>
                    </div>

                    <div class="presets-content-wrapper" id="galleryContent">
                        <div class="gallery-grid" id="galleryGrid">
                            <!-- JS generated -->
                        </div>
                    </div>
                </div>

                <!-- Advanced Section -->
                <div class="custom-section" id="advancedSection">
                    <h3><i class="fa-solid fa-cog"></i> Advanced Settings</h3>

                    <div class="setting-group">
                        <h4><i class="fa-solid fa-hand-pointer"></i> Subject Interaction Mode</h4>
                        <p class="setting-description">Choose what happens when you click on a subject in the timetable.
                        </p>
                        <div class="mode-toggle-container">
                            <button class="mode-btn active" data-mode="link" id="modeLinkBtn">
                                <i class="fa-solid fa-external-link"></i>
                                <span>Open Textbook</span>
                            </button>
                            <button class="mode-btn" data-mode="mark" id="modeMarkBtn">
                                <i class="fa-solid fa-highlighter"></i>
                                <span>Mark Subject</span>
                            </button>
                        </div>
                        <div class="mode-indicator" id="modeIndicator">
                            <i class="fa-solid fa-circle-info"></i>
                            <span>Current mode: <strong id="currentModeText">Open Textbook</strong></span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h4><i class="fa-solid fa-mobile-screen"></i> Bottom Navbar Shortcuts</h4>
                        <p class="setting-description">Customize the two shortcut buttons on the mobile navigation bar.
                        </p>
                        <div class="shortcut-config">
                            <div class="shortcut-item">
                                <label for="shortcut1Select"> Shortcut 1</label>
                                <select id="shortcut1Select" class="shortcut-select">
                                    <option value="customization" selected>Customization</option>
                                    <option value="weather">Weather</option>
                                    <option value="textbooks">All Textbooks</option>
                                    <option value="clock">Clock</option>
                                    <option value="tasks">My Tasks</option>
                                    <option value="info">Info</option>
                                </select>
                            </div>
                            <div class="shortcut-item">
                                <label for="shortcut2Select"> Shortcut 2</label>
                                <select id="shortcut2Select" class="shortcut-select">
                                    <option value="customization">Customization</option>
                                    <option value="weather" selected>Weather</option>
                                    <option value="textbooks">All Textbooks</option>
                                    <option value="clock">Clock</option>
                                    <option value="tasks">My Tasks</option>
                                    <option value="info">Info</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Weather Overlay -->
    <div id="weatherOverlay" class="overlay">
        <div class="weather-overlay-container">
            <button id="closeWeatherOverlay" class="close-btn"><i class="fa-solid fa-xmark"></i></button>

            <div class="weather-overlay-header">
                <h2><i class="fas fa-cloud-sun"></i> Weather Information</h2>
            </div>

            <div class="weather-overlay-content">
                <div class="weather-main-info">
                    <div class="weather-large-emoji" id="overlayWeatherEmoji">‚òÅÔ∏è</div>
                    <div class="weather-large-temp" id="overlayWeatherTemp">--¬∞C</div>
                    <div class="weather-large-desc" id="overlayWeatherDesc">Loading...</div>
                </div>

                <div class="weather-location-info">
                    <i class="fa-solid fa-location-dot"></i>
                    <span id="overlayWeatherLocation">Detecting location...</span>
                </div>

                <div class="weather-details-grid">
                    <div class="weather-detail-card">
                        <i class="fa-solid fa-sun"></i>
                        <div class="weather-detail-label">Sunrise</div>
                        <div class="weather-detail-value" id="overlaySunrise">--:--</div>
                    </div>
                    <div class="weather-detail-card">
                        <i class="fa-solid fa-moon"></i>
                        <div class="weather-detail-label">Sunset</div>
                        <div class="weather-detail-value" id="overlaySunset">--:--</div>
                    </div>
                    <div class="weather-detail-card">
                        <i class="fa-solid fa-clock"></i>
                        <div class="weather-detail-label">Current Time</div>
                        <div class="weather-detail-value" id="overlayCurrentTime">--:--</div>
                    </div>
                    <div class="weather-detail-card">
                        <i class="fa-solid fa-calendar"></i>
                        <div class="weather-detail-label">Date</div>
                        <div class="weather-detail-value" id="overlayCurrentDate">--/--/----</div>
                    </div>
                </div>

                <div class="weather-refresh">
                    <button id="refreshWeatherBtn" class="refresh-weather-btn">
                        <i class="fa-solid fa-rotate"></i> Refresh Weather
                    </button>
                    <div class="weather-last-update">
                        Last updated: <span id="lastWeatherUpdate">Never</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Today View (Card Layout) -->
    <div class="today-view" id="todayView">
        <div class="today-view-header">
            <h2 class="today-title"><i class="fa-solid fa-calendar-day"></i> Today's Schedule</h2>
            <div class="today-date" id="todayDate"></div>
        </div>

        <!-- Mobile Recommended Textbook -->
        <div id="mobileRecommendedManual" class="mobile-recommended-manual">
            <!-- Populated by JS -->
        </div>

        <div class="today-cards" id="todayCards">
            <!-- Cards will be populated via JS -->
        </div>
        <div class="today-empty" id="todayEmpty">
            <i class="fa-solid fa-umbrella-beach"></i>
            <p>No classes today!</p>
        </div>
    </div>

    <!-- Bottom Navigation Bar (Mobile Only) -->
    <nav class="bottom-navbar" id="bottomNavbar">
        <button class="nav-item active" data-view="today" id="navToday">
            <i class="fa-solid fa-calendar-day"></i>
            <span>Today</span>
        </button>
        <button class="nav-item" data-view="full" id="navFull">
            <i class="fa-solid fa-table-cells"></i>
            <span>Full</span>
        </button>
        <button class="nav-item nav-menu-btn" id="bottomMenuBtn">
            <i class="fa-solid fa-grip-lines"></i>
            <span>Menu</span>
        </button>
        <button class="nav-item nav-shortcut" data-shortcut="1" id="navShortcut1">
            <i class="fa-solid fa-sliders"></i>
            <span>Custom</span>
        </button>
        <button class="nav-item nav-shortcut" data-shortcut="2" id="navShortcut2">
            <i class="fa-solid fa-cloud-sun"></i>
            <span>Weather</span>
        </button>
    </nav>

    <!-- Bottom Sheet Menu (Mobile) -->
    <div class="bottom-sheet-overlay" id="bottomSheetOverlay"></div>
    <div class="bottom-sheet" id="bottomSheet">
        <div class="bottom-sheet-handle-container">
            <div class="bottom-sheet-handle"></div>
        </div>
        <div class="bottom-sheet-header-actions">
            <button class="bottom-sheet-close" onclick="window.mobileNav.closeBottomSheet()">
                <i class="fa-solid fa-chevron-down"></i>
            </button>
        </div>
        <div class="bottom-sheet-content">
            <h2 class="bottom-sheet-title">Menu</h2>
            <div class="bottom-sheet-grid">
                <button class="sheet-menu-btn" id="sheetCustomizationBtn">
                    <i class="fa-solid fa-sliders"></i>
                    <span>Customization</span>
                </button>

                <button class="sheet-menu-btn" id="sheetWeatherBtn">
                    <div class="weather-btn-content">
                        <span id="sheetWeatherEmoji" class="sheet-weather-emoji">‚òÅÔ∏è</span>
                        <div class="weather-btn-text">
                            <span class="weather-btn-label">Weather</span>
                            <span id="sheetWeatherTemp" class="sheet-weather-temp">--¬∞C</span>
                        </div>
                    </div>
                </button>

                <button class="sheet-menu-btn" id="sheetManualsBtn">
                    <i class="fa-solid fa-book"></i>
                    <span>All Textbooks</span>
                </button>

                <button class="sheet-menu-btn" id="sheetClockBtn">
                    <i class="fa-solid fa-clock"></i>
                    <span>Clock</span>
                </button>

                <button class="sheet-menu-btn" id="sheetTodoBtn">
                    <i class="fa-solid fa-list-check"></i>
                    <span>My Tasks</span>
                </button>

                <button class="sheet-menu-btn" id="sheetInfoBtn">
                    <i class="fa-solid fa-circle-info"></i>
                    <span>Info</span>
                </button>
            </div>
        </div>
    </div>
    <script src="../js/customization.js"></script>
    <script src="../js/manuals.js"></script>
    <script src="../js/mobile-nav.js"></script>
    <script src="../js/overlay-manager.js"></script>
    <script src="../js/timetable8a.js"></script>
    <script src="../js/todo.js"></script>
    <script src="../js/ui-core.js"></script>
    <script src="../js/weather-time.js"></script>
</body>

</html>