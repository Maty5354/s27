/* ============================================================
   ACCENT COLOR TAB  — Full rework
   accent.css  |  companion: accent.js
   ============================================================ */

/* ── Animated Header ─────────────────────────────────────── */
.accent-header {
    position: relative;
    border-radius: var(--border-radius);
    overflow: hidden;
    margin-bottom: 1.25rem;
    min-height: 96px;
}

.accent-header-svg {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    pointer-events: none;
}

/* Hue-rotating spectrum blob */
.ah-spectrum {
    animation: ahSpectrumHue 8s linear infinite;
}
@keyframes ahSpectrumHue { to { filter: hue-rotate(360deg); } }

/* Floating orbs */
.ah-orb1 { animation: ahOrb1 7s ease-in-out infinite; }
.ah-orb2 { animation: ahOrb2 9s ease-in-out infinite; }
.ah-orb3 { animation: ahOrb3 11s ease-in-out infinite; }
@keyframes ahOrb1 {
    0%,100%  { opacity:.45; transform:translate(0,0) scale(1); }
    50%      { opacity:.85; transform:translate(14px,-8px) scale(1.12); }
}
@keyframes ahOrb2 {
    0%,100%  { opacity:.3; transform:translate(0,0) scale(1); }
    40%      { opacity:.7; transform:translate(-10px,6px) scale(0.92); }
    80%      { opacity:.5; transform:translate(6px,-4px) scale(1.06); }
}
@keyframes ahOrb3 {
    0%,100%  { opacity:.25; transform:translate(0,0) scale(1); }
    60%      { opacity:.6;  transform:translate(8px,10px) scale(1.08); }
}

/* Spinning conic ring around icon */
.ah-conic-ring {
    animation: ahConicSpin 12s linear infinite;
    transform-origin: center;
}
@keyframes ahConicSpin { to { transform: rotate(360deg); } }

/* Wave paths */
.ah-wave1 { animation: ahWave1 10s ease-in-out infinite; }
.ah-wave2 { animation: ahWave2 14s ease-in-out infinite; }
@keyframes ahWave1 {
    0%,100% { d: path("M0 60 Q200 30 400 60 Q600 90 800 60 L800 100 L0 100 Z"); }
    50%     { d: path("M0 50 Q200 80 400 45 Q600 15 800 55 L800 100 L0 100 Z"); }
}
@keyframes ahWave2 {
    0%,100% { d: path("M0 75 Q300 50 600 75 Q750 88 900 65 L900 100 L0 100 Z"); }
    50%     { d: path("M0 65 Q300 90 600 60 Q750 40 900 80 L900 100 L0 100 Z"); }
}

/* Floating dots */
.ah-dot { animation: ahDotFloat var(--dur,5s) ease-in-out var(--del,0s) infinite; }
@keyframes ahDotFloat {
    0%,100% { transform: translateY(0); opacity: .5; }
    50%     { transform: translateY(-10px); opacity: 1; }
}

.accent-header-content {
    position: relative; z-index: 2;
    display: flex; align-items: center; justify-content: space-between;
    flex-wrap: wrap; gap: .75rem;
    padding: 1.25rem 1.5rem; width: 100%;
}

.accent-header-left { display: flex; align-items: center; gap: 1rem; }

/* Icon ring */
.accent-hdr-icon-wrap {
    position: relative; width: 50px; height: 50px; flex-shrink: 0;
    animation: hdrIconFloat 5s ease-in-out infinite;
}
@keyframes hdrIconFloat {
    0%,100% { transform: translateY(0) rotate(0deg); }
    40%     { transform: translateY(-5px) rotate(4deg); }
    70%     { transform: translateY(2px) rotate(-2deg); }
}

.accent-hdr-icon-wrap svg { position: absolute; inset: 0; width: 100%; height: 100%; }

.accent-hdr-icon-face {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.25rem; z-index: 1;
}

.accent-hdr-title { margin: 0; font-size: 1.15rem; font-weight: 700; letter-spacing: -.02em; color: var(--text-color); }
.accent-hdr-sub   { margin: 2px 0 0; font-size: .75rem; color: var(--text-muted); }

/* Live color pill */
.accent-live-pill {
    display: flex; align-items: center; gap: 8px;
    padding: 6px 12px 6px 6px;
    background: color-mix(in srgb, var(--card-bg) 80%, transparent);
    border: 1px solid color-mix(in srgb, var(--border-color) 70%, transparent);
    border-radius: var(--border-radius-pill);
    backdrop-filter: blur(8px);
    cursor: pointer;
    transition: all .2s ease;
}
.accent-live-pill:hover { transform: scale(1.03); }

.accent-live-dot {
    width: 26px; height: 26px; border-radius: 50%;
    background: var(--accent-color);
    border: 2px solid rgba(255,255,255,.25);
    transition: background .35s ease, box-shadow .35s ease;
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--accent-color) 40%, transparent);
    animation: liveDotPulse 2.5s ease-in-out infinite;
}
@keyframes liveDotPulse {
    0%,100% { box-shadow: 0 0 0 0   color-mix(in srgb, var(--accent-color) 45%, transparent); }
    50%     { box-shadow: 0 0 0 6px color-mix(in srgb, var(--accent-color) 0%,  transparent); }
}

.accent-live-hex {
    font-family: 'JetBrains Mono','Courier New',monospace;
    font-size: .78rem; font-weight: 700; letter-spacing: .04em;
    color: var(--text-color); transition: color .2s;
}

.accent-live-name {
    font-size: .65rem; color: var(--text-muted);
    font-style: italic; transition: color .3s;
}

/* ── Live UI Preview ─────────────────────── */
.accent-preview-bar {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    overflow: hidden;
    margin-bottom: 1.25rem;
}

.accent-preview-topbar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 7px 12px;
    border-bottom: 1px solid var(--border-color);
    background: var(--highlight-color);
}

.accent-preview-label {
    display: flex; align-items: center; gap: 6px;
    font-size: .62rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 1px; color: var(--text-muted);
}

.preview-livebead {
    width: 6px; height: 6px; border-radius: 50%; background: #10b981;
    animation: previewBead 2s ease-in-out infinite;
}
@keyframes previewBead {
    0%,100% { opacity:1; transform:scale(1); }
    50%     { opacity:.4; transform:scale(.8); }
}

.accent-preview-grid {
    display: flex; flex-wrap: wrap; gap: 8px;
    padding: 12px 14px;
}

.pv-item {
    display: flex; flex-direction: column; align-items: center;
    gap: 5px; padding: 10px 10px 8px;
    background: var(--highlight-color);
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--border-color);
    flex: 1; min-width: 90px;
    transition: transform .2s ease;
}
.pv-item:hover { transform: translateY(-2px); }

.pv-item-label { font-size: .6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: .5px; }

.pv-btn {
    padding: 5px 12px; border-radius: var(--border-radius-xs);
    background: var(--accent-color); color: var(--text-on-accent);
    font-size: .72rem; font-weight: 700; border: none; cursor: default;
    transition: background .35s ease, box-shadow .35s ease;
    box-shadow: 0 2px 8px color-mix(in srgb,var(--accent-color) 40%,transparent);
    white-space: nowrap;
}

.pv-badge {
    padding: 3px 9px; border-radius: var(--border-radius-pill);
    background: color-mix(in srgb,var(--accent-color) 15%,var(--card-bg));
    color: var(--accent-color);
    border: 1px solid color-mix(in srgb,var(--accent-color) 30%,transparent);
    font-size: .68rem; font-weight: 700;
    transition: all .35s ease;
}

.pv-link {
    color: var(--accent-color); font-size: .78rem; font-weight: 600;
    text-decoration: underline dotted; text-underline-offset: 3px;
    transition: color .35s ease;
}

.pv-toggle {
    width: 36px; height: 20px; border-radius: var(--border-radius-pill);
    background: var(--accent-color); position: relative;
    transition: background .35s ease;
    box-shadow: 0 0 8px color-mix(in srgb,var(--accent-color) 30%,transparent);
}
.pv-toggle-thumb {
    position: absolute; right: 2px; top: 2px;
    width: 16px; height: 16px; border-radius: 50%;
    background: white; box-shadow: 0 1px 3px rgba(0,0,0,.25);
}

.pv-progress {
    width: 80px; height: 6px; border-radius: 3px;
    background: var(--border-color); overflow: hidden;
}
.pv-progress-fill {
    width: 65%; height: 100%; border-radius: 3px;
    background: var(--accent-color);
    transition: background .35s ease;
    position: relative; overflow: hidden;
}
.pv-progress-fill::after {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);
    animation: pvShimmer 2s linear infinite;
}
@keyframes pvShimmer { from{transform:translateX(-100%)} to{transform:translateX(100%)} }

.pv-border { width: 40px; height: 26px; border-radius: var(--border-radius-xs); border: 2px solid var(--accent-color); transition: border-color .35s ease; }
.pv-dot    { width: 18px; height: 18px; border-radius: 50%; background: var(--accent-color); transition: background .35s ease; box-shadow: 0 0 0 4px color-mix(in srgb,var(--accent-color) 20%,transparent); }

@keyframes progressShimmer {
    from { background-position: 200% 0; }
    to   { background-position: -200% 0; }
}

/* ── Block / Section header ──────────────── */
.accent-block { margin-bottom: 1.4rem; }

.accent-block-hdr {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: .65rem; padding-bottom: .5rem;
    border-bottom: 1px solid var(--border-color);
}

.accent-block-title {
    display: flex; align-items: center; gap: 6px;
    font-size: .68rem; font-weight: 800; text-transform: uppercase;
    letter-spacing: 1.1px; color: var(--text-muted);
}
.accent-block-title i { color: var(--accent-color); font-size: .75rem; }

.accent-micro-btn {
    display: flex; align-items: center; gap: 4px;
    padding: 4px 9px;
    border: 1px solid var(--border-color); border-radius: var(--border-radius-xs);
    background: var(--input-bg); color: var(--text-muted);
    font-size: .67rem; font-family: var(--font-family); cursor: pointer;
    transition: all .15s ease;
}
.accent-micro-btn:hover {
    border-color: var(--accent-color); color: var(--accent-color);
    background: color-mix(in srgb,var(--accent-color) 7%,var(--input-bg));
}
.accent-micro-btn.danger:hover { border-color: var(--danger-color); color: var(--danger-color); background: color-mix(in srgb,var(--danger-color) 7%,var(--input-bg)); }

/* ── Picker Row ──────────────────────────── */
.accent-picker-row {
    display: flex; flex-wrap: wrap; gap: 1rem; align-items: flex-start;
    padding: 1rem; background: var(--input-bg);
    border: 1.5px solid var(--border-color); border-radius: var(--border-radius-sm);
    transition: border-color .2s ease;
}
.accent-picker-row:focus-within {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px color-mix(in srgb,var(--accent-color) 10%,transparent);
}

#accent-pickr-mount .pcr-button {
    width: 48px !important; height: 48px !important;
    border-radius: var(--border-radius-sm) !important;
    border: 2px solid var(--border-color) !important;
    transition: border-color .2s,box-shadow .2s !important;
}
#accent-pickr-mount .pcr-button:hover {
    border-color: var(--accent-color) !important;
    box-shadow: 0 0 0 3px color-mix(in srgb,var(--accent-color) 18%,transparent) !important;
}

.accent-picker-info {
    flex: 1; min-width: 200px;
    display: flex; flex-direction: column; gap: 7px;
}

.accent-hex-row { display: flex; align-items: center; gap: 6px; }

.accent-hex-input {
    flex: 1; padding: 7px 10px;
    background: var(--card-bg); border: 1.5px solid var(--border-color);
    border-radius: var(--border-radius-xs);
    font-family: 'JetBrains Mono',monospace; font-size: .85rem; font-weight: 700;
    color: var(--text-color); outline: none;
    transition: border-color .18s;
}
.accent-hex-input:focus { border-color: var(--accent-color); }

.accent-copy-btn {
    width: 32px; height: 32px; border-radius: var(--border-radius-xs);
    background: var(--card-bg); border: 1.5px solid var(--border-color);
    color: var(--text-muted); cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-size: .75rem; transition: all .18s; flex-shrink: 0; overflow: hidden;
}
.accent-copy-btn:hover  { border-color: var(--accent-color); color: var(--accent-color); }
.accent-copy-btn.copied { background: #10b981; border-color: #10b981; color: white; }

.accent-picker-btns { display: flex; flex-wrap: wrap; gap: 5px; }

.accent-act-btn {
    display: flex; align-items: center; gap: 5px;
    padding: 5px 10px; border-radius: var(--border-radius-xs);
    border: 1.5px solid var(--border-color); background: var(--card-bg);
    color: var(--text-muted); font-size: .72rem; font-family: var(--font-family);
    cursor: pointer; transition: all .18s; white-space: nowrap;
}
.accent-act-btn:hover  { border-color: var(--accent-color); color: var(--accent-color); background: color-mix(in srgb,var(--accent-color) 6%,var(--card-bg)); }
.accent-act-btn.primary {
    background: var(--accent-color); border-color: var(--accent-color); color: var(--text-on-accent);
}
.accent-act-btn.primary:hover {
    filter: brightness(1.1); transform: translateY(-1px);
    box-shadow: 0 3px 10px color-mix(in srgb,var(--accent-color) 35%,transparent);
    color: var(--text-on-accent); background: var(--accent-color); border-color: var(--accent-color);
}

/* Hue nudge row */
.accent-hue-row { display: flex; align-items: center; gap: 4px; }
.accent-hue-btn {
    padding: 3px 8px; border-radius: var(--border-radius-xs);
    border: 1px solid var(--border-color); background: var(--input-bg);
    color: var(--text-muted); font-size: .68rem; font-family: 'JetBrains Mono',monospace;
    font-weight: 700; cursor: pointer; transition: all .15s;
}
.accent-hue-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
.accent-hue-lbl { font-size: .63rem; color: var(--text-muted); padding: 0 3px; }

/* ── Split Randomize Buttons ─────────────── */
.accent-rand-row { display: flex; flex-wrap: wrap; gap: .65rem; margin-bottom: 1.5rem; }

.accent-split-btn {
    position: relative; display: flex; flex: 1; min-width: 155px;
    border-radius: var(--border-radius-sm); overflow: visible;
}

.accent-split-main {
    flex: 1; display: flex; align-items: center; gap: 8px; padding: 9px 12px;
    background: var(--highlight-color); color: var(--text-color);
    border: 1.5px solid var(--border-color); border-right: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
    font-size: .8rem; font-weight: 700; font-family: var(--font-family);
    cursor: pointer; transition: all .18s; text-align: left;
}
.accent-split-main:hover {
    background: var(--card-bg); border-color: var(--accent-color);
    border-right-color: var(--border-color); color: var(--accent-color);
}

.split-icon {
    width: 28px; height: 28px; border-radius: var(--border-radius-xs);
    background: color-mix(in srgb,var(--accent-color) 14%,transparent);
    display: flex; align-items: center; justify-content: center;
    font-size: .72rem; color: var(--accent-color); flex-shrink: 0;
    transition: all .18s;
}
.accent-split-main:hover .split-icon { background: color-mix(in srgb,var(--accent-color) 22%,transparent); transform: rotate(-12deg) scale(1.1); }

.split-label { display: flex; flex-direction: column; gap: 1px; line-height: 1.2; }
.split-title { font-size: .78rem; font-weight: 700; }
.split-sub   { font-size: .6rem;  font-weight: 400; color: var(--text-muted); }

.accent-split-arrow {
    width: 30px; flex-shrink: 0;
    background: var(--highlight-color); color: var(--text-muted);
    border: 1.5px solid var(--border-color); border-left: none;
    border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
    display: flex; align-items: center; justify-content: center;
    font-size: .65rem; cursor: pointer; transition: all .18s;
}
.accent-split-arrow:hover   { background: var(--card-bg); border-color: var(--accent-color); color: var(--accent-color); }
.accent-split-arrow i       { transition: transform .18s; }
.accent-split-btn.menu-open .accent-split-arrow i { transform: rotate(180deg); }

/* Dropdown menu */
.accent-split-menu {
    position: absolute; top: calc(100% + 5px); right: 0; min-width: 210px;
    background: var(--card-bg); border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm); box-shadow: var(--box-shadow-md);
    z-index: 400; overflow: hidden;
    opacity: 0; transform: translateY(-6px) scale(.97);
    pointer-events: none; transform-origin: top right;
    transition: all .15s ease;
}
.accent-split-btn.menu-open .accent-split-menu {
    opacity: 1; transform: translateY(0) scale(1); pointer-events: all;
}

.split-menu-item {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 12px; background: transparent;
    border: none; width: 100%; font-family: var(--font-family);
    font-size: .78rem; color: var(--text-color); cursor: pointer;
    transition: background .12s;
}
.split-menu-item:hover { background: var(--highlight-color); }

.split-menu-item-left { display: flex; align-items: center; gap: 8px; }
.split-menu-item-left i { color: var(--accent-color); width: 14px; font-size: .75rem; text-align: center; }

.split-menu-toggle {
    width: 28px; height: 16px; border-radius: var(--border-radius-pill);
    background: var(--border-color); position: relative; transition: background .18s; flex-shrink: 0;
}
.split-menu-toggle::after {
    content:''; position:absolute; top:2px; left:2px;
    width:12px; height:12px; border-radius:50%;
    background: white; transition: transform .18s; box-shadow:0 1px 3px rgba(0,0,0,.2);
}
.split-menu-toggle.on { background: var(--accent-color); }
.split-menu-toggle.on::after { transform: translateX(12px); }

.split-menu-divider { height:1px; background: var(--border-color); margin: 2px 0; }

/* Randomize bounce animation */
@keyframes randBounce {
    0%   { transform: rotate(0deg)   scale(1); }
    30%  { transform: rotate(200deg) scale(.85); }
    65%  { transform: rotate(320deg) scale(1.1); }
    100% { transform: rotate(360deg) scale(1); }
}
.accent-split-main.spinning .split-icon i { animation: randBounce .5s cubic-bezier(.34,1.56,.64,1); }

/* Flash on apply */
@keyframes accentFlash {
    0%   { outline: 0px solid color-mix(in srgb,var(--accent-color) 0%,transparent); }
    40%  { outline: 4px solid color-mix(in srgb,var(--accent-color) 50%,transparent); }
    100% { outline: 4px solid color-mix(in srgb,var(--accent-color) 0%,transparent); }
}
.accent-flash { animation: accentFlash .5s ease forwards; }

/* ── Color Grid (presets / recommended / recent) ─ */
.accent-color-grid {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 6px;
}
@media(max-width:900px) { .accent-color-grid { grid-template-columns: repeat(7, 1fr); } }
@media(max-width:700px) { .accent-color-grid { grid-template-columns: repeat(6, 1fr); } }
@media(max-width:560px) { .accent-color-grid { grid-template-columns: repeat(5, 1fr); } }
@media(max-width:400px) { .accent-color-grid { grid-template-columns: repeat(4, 1fr); } }

.accent-swatch {
    aspect-ratio: 1; border-radius: var(--border-radius-sm);
    cursor: pointer; border: 2.5px solid transparent; outline: none;
    position: relative; overflow: hidden;
    transition: transform .2s cubic-bezier(.34,1.56,.64,1), border-color .18s, box-shadow .18s;
    animation: swatchPop .35s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes swatchPop {
    from { transform: scale(0) rotate(-15deg); opacity: 0; }
    70%  { transform: scale(1.12) rotate(3deg); }
    to   { transform: scale(1) rotate(0deg); opacity: 1; }
}
.accent-swatch:hover { transform: scale(1.18) translateY(-2px); z-index: 2; }
.accent-swatch:active { transform: scale(.9); }
.accent-swatch.active {
    border-color: white;
    box-shadow: 0 0 0 2px var(--accent-color), 0 4px 14px rgba(0,0,0,.25);
}
.accent-swatch.active::after {
    content: '✓'; position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    font-size: .65rem; font-weight: 900; color: white;
    text-shadow: 0 1px 3px rgba(0,0,0,.5); background: rgba(0,0,0,.12);
}

/* Swatch tooltip */
.accent-swatch::before {
    content: attr(data-hex);
    position: absolute; bottom: -22px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,.75); color: white;
    font-family: 'JetBrains Mono',monospace; font-size: .52rem;
    padding: 1px 5px; border-radius: 3px; white-space: nowrap;
    opacity: 0; transition: bottom .18s, opacity .18s;
    pointer-events: none; z-index: 10;
}
.accent-swatch:hover::before { bottom: 3px; opacity: 1; }

/* Ripple on click */
.swatch-ripple {
    position: absolute; border-radius: 50%;
    background: rgba(255,255,255,.4); width: 5px; height: 5px;
    top: 50%; left: 50%; transform: translate(-50%,-50%) scale(0);
    animation: swRipple .5s ease-out forwards; pointer-events: none;
}
@keyframes swRipple { to { transform: translate(-50%,-50%) scale(9); opacity: 0; } }

/* Empty preset slot */
.accent-swatch-empty {
    aspect-ratio: 1; border-radius: var(--border-radius-sm);
    cursor: pointer; border: 2px dashed var(--border-color);
    background: var(--input-bg);
    display: flex; align-items: center; justify-content: center;
    color: var(--text-muted); font-size: .85rem;
    transition: all .18s; animation: swatchPop .35s cubic-bezier(.34,1.56,.64,1) both;
    position: relative; overflow: hidden;
}
.accent-swatch-empty:hover {
    border-color: var(--accent-color); color: var(--accent-color);
    background: color-mix(in srgb,var(--accent-color) 7%,var(--input-bg));
    transform: scale(1.1);
}
.accent-swatch-empty:hover i { transform: rotate(90deg) scale(1.1); }
.accent-swatch-empty i { transition: transform .2s; }

/* Preset filled slot */
.preset-del-overlay {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    background: rgba(0,0,0,.45); opacity: 0;
    font-size: .7rem; color: white;
    transition: opacity .18s;
}
.accent-swatch:hover .preset-del-overlay { opacity: 1; }

/* Staggered entrance for grids */
.accent-color-grid > :nth-child(1)  { animation-delay: .02s; }
.accent-color-grid > :nth-child(2)  { animation-delay: .04s; }
.accent-color-grid > :nth-child(3)  { animation-delay: .06s; }
.accent-color-grid > :nth-child(4)  { animation-delay: .08s; }
.accent-color-grid > :nth-child(5)  { animation-delay: .10s; }
.accent-color-grid > :nth-child(6)  { animation-delay: .12s; }
.accent-color-grid > :nth-child(7)  { animation-delay: .14s; }
.accent-color-grid > :nth-child(8)  { animation-delay: .16s; }
.accent-color-grid > :nth-child(9)  { animation-delay: .18s; }
.accent-color-grid > :nth-child(10) { animation-delay: .20s; }
.accent-color-grid > :nth-child(n+11){ animation-delay: .22s; }

/* ── Harmony Section ─────────────────────── */
.accent-harmony-list { display: flex; flex-direction: column; gap: .55rem; }

.accent-harmony-row {
    display: flex; align-items: center; gap: .65rem; flex-wrap: wrap;
    padding: 8px 10px; background: var(--input-bg);
    border: 1px solid var(--border-color); border-radius: var(--border-radius-sm);
    transition: border-color .18s; animation: fadeInRow .3s ease both;
}
@keyframes fadeInRow { from { opacity:0; transform: translateX(-8px); } to { opacity:1; transform: none; } }
.accent-harmony-row:hover { border-color: var(--accent-color); }

.harmony-name {
    width: 100px; flex-shrink: 0; font-size: .65rem; font-weight: 700;
    color: var(--text-muted); text-transform: uppercase; letter-spacing: .7px;
}

.harmony-swatches { display: flex; gap: 4px; flex: 1; flex-wrap: wrap; }

.harmony-sw {
    width: 28px; height: 28px; border-radius: var(--border-radius-xs);
    cursor: pointer; border: 2px solid transparent;
    transition: transform .2s cubic-bezier(.34,1.56,.64,1), border-color .18s;
    position: relative; overflow: hidden;
    animation: swatchPop .3s cubic-bezier(.34,1.56,.64,1) both;
}
.harmony-sw:hover { transform: scale(1.22) translateY(-3px); border-color: rgba(255,255,255,.5); z-index:2; }
.harmony-sw:active { transform: scale(.9); }
.harmony-sw::before {
    content: attr(data-hex);
    position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,.75); color: white;
    font-size: .5rem; padding: 1px 4px; border-radius: 3px;
    white-space: nowrap; opacity: 0; transition: bottom .18s, opacity .18s;
    pointer-events: none; font-family: monospace; z-index: 10;
}
.harmony-sw:hover::before { bottom: 2px; opacity: 1; }

/* ── Advanced Section ────────────────────── */
.accent-adv-toggle {
    width: 100%; display: flex; align-items: center; justify-content: space-between;
    padding: 10px 14px; background: var(--input-bg);
    border: 1.5px dashed var(--border-color); border-radius: var(--border-radius-sm);
    color: var(--text-muted); font-size: .78rem; font-weight: 700;
    font-family: var(--font-family); cursor: pointer; transition: all .18s;
}
.accent-adv-toggle:hover {
    border-color: var(--accent-color); color: var(--accent-color);
    background: color-mix(in srgb,var(--accent-color) 5%,var(--input-bg));
}
.accent-adv-toggle-left { display: flex; align-items: center; gap: 8px; }
.accent-adv-toggle .adv-chev { transition: transform .2s; font-size: .7rem; }
.accent-adv-toggle.open .adv-chev { transform: rotate(180deg); }

.accent-adv-body {
    display: none; flex-direction: column; gap: .85rem;
    background: var(--input-bg); border: 1.5px dashed var(--border-color);
    border-top: none; border-radius: 0 0 var(--border-radius-sm) var(--border-radius-sm);
    padding: 1rem; animation: fadeInAdv .2s ease;
}
@keyframes fadeInAdv { from{opacity:0;transform:translateY(-6px)} to{opacity:1;transform:none} }
.accent-adv-body.open { display: flex; }

/* Beta badge */
.beta-badge {
    display: inline-flex; align-items: center; gap: 3px;
    padding: 2px 7px; border-radius: var(--border-radius-pill);
    background: linear-gradient(135deg,#f59e0b,#ef4444);
    color: white; font-size: .55rem; font-weight: 900;
    text-transform: uppercase; letter-spacing: .8px;
    animation: betaPulse 3s ease-in-out infinite;
}
@keyframes betaPulse {
    0%,100% { box-shadow: 0 0 0 0 rgba(245,158,11,.5); }
    50%     { box-shadow: 0 0 0 5px rgba(245,158,11,0); }
}

/* Advanced sub-section */
.accent-adv-section {
    padding: .85rem; background: var(--card-bg);
    border: 1px solid var(--border-color); border-radius: var(--border-radius-sm);
    display: flex; flex-direction: column; gap: .7rem;
}
.accent-adv-hdr {
    display: flex; align-items: center; justify-content: space-between; gap: 8px;
}
.accent-adv-title {
    display: flex; align-items: center; gap: 7px;
    font-size: .78rem; font-weight: 700; color: var(--text-color);
}
.accent-adv-title i { color: var(--accent-color); }

/* ── Gradient Mode ───────────────────────── */
.gradient-preview {
    height: 34px; border-radius: var(--border-radius-xs);
    border: 1px solid var(--border-color);
    transition: all .35s ease; position: relative; overflow: hidden;
}
.gradient-preview::after {
    content:''; position:absolute; inset:0;
    background: linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);
    background-size: 200% 100%;
    animation: gpShimmer 2.5s ease-in-out infinite;
}
@keyframes gpShimmer {
    0%   { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.gradient-row { display: grid; grid-template-columns: 1fr 1fr; gap: .65rem; align-items: end; }

.gradient-field { display: flex; flex-direction: column; gap: 4px; }
.gradient-field-lbl { font-size: .63rem; font-weight: 700; text-transform: uppercase; letter-spacing: .6px; color: var(--text-muted); }

/* Direction knob */
.gradient-dir-knob {
    width: 60px; height: 60px; cursor: grab; user-select: none;
    margin: 0 auto;
}
.gradient-dir-knob:active { cursor: grabbing; }
.dir-track { fill: none; stroke: var(--border-color); stroke-width: 3; }
.dir-indicator { stroke: var(--accent-color); stroke-width: 2.5; stroke-linecap: round; transition: none; filter: drop-shadow(0 0 3px color-mix(in srgb,var(--accent-color) 60%,transparent)); }
.dir-center { fill: color-mix(in srgb,var(--accent-color) 25%,var(--card-bg)); stroke: var(--accent-color); stroke-width: 1.5; }

.gradient-type-btns { display: flex; gap: 4px; }
.gradient-type-btn {
    flex: 1; padding: 5px 6px; border: 1px solid var(--border-color);
    border-radius: var(--border-radius-xs); background: transparent;
    color: var(--text-muted); font-size: .65rem; font-family: var(--font-family);
    cursor: pointer; transition: all .15s;
    display: flex; align-items: center; justify-content: center; gap: 4px;
}
.gradient-type-btn:hover  { border-color: var(--accent-color); color: var(--accent-color); }
.gradient-type-btn.active { background: var(--accent-color); border-color: var(--accent-color); color: var(--text-on-accent); }

.gradient-stop-row { display: flex; align-items: center; gap: 8px; }
.gradient-stop-swatch {
    width: 28px; height: 28px; border-radius: var(--border-radius-xs);
    border: 2px solid var(--border-color); cursor: pointer;
    transition: transform .15s;
}
.gradient-stop-swatch:hover { transform: scale(1.1); border-color: var(--accent-color); }

/* ── Intensity Slider ────────────────────── */
.intensity-strip {
    flex: 1; height: 16px; border-radius: var(--border-radius-pill);
    position: relative; overflow: hidden; border: 1px solid var(--border-color);
}
.intensity-fill {
    position: absolute; inset: 0;
    background: var(--accent-color);
    transition: opacity .2s, background .35s;
}

.intensity-row { display: flex; align-items: center; gap: .75rem; }
.intensity-val {
    font-family: 'JetBrains Mono',monospace; font-size: .72rem; font-weight: 700;
    color: var(--accent-color); min-width: 40px; text-align: right; transition: color .35s;
}

/* Standard range input resets */
.accent-slider-wrap input[type=range] {
    -webkit-appearance: none; appearance: none;
    width: 100%; height: 6px; border-radius: 3px;
    background: var(--border-color); outline: none; cursor: pointer;
    transition: background .35s;
}
.accent-slider-wrap input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px; height: 18px; border-radius: 50%;
    background: var(--accent-color); cursor: pointer;
    border: 3px solid var(--card-bg); box-shadow: 0 0 0 2px var(--accent-color);
    transition: transform .15s, background .35s, box-shadow .35s;
}
.accent-slider-wrap input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }

/* ── Contrast Checker ────────────────────── */
.contrast-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .6rem; }
.contrast-item {
    padding: 8px 10px; border-radius: var(--border-radius-xs);
    border: 1px solid var(--border-color); background: var(--highlight-color);
    display: flex; flex-direction: column; gap: 4px;
}
.contrast-lbl { font-size: .6rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: .5px; }
.contrast-ratio {
    font-size: 1.05rem; font-weight: 800;
    font-family: 'JetBrains Mono',monospace;
    transition: color .3s;
}
.contrast-badges { display: flex; gap: 3px; flex-wrap: wrap; }
.wcag-badge { padding: 1px 5px; border-radius: 3px; font-size: .55rem; font-weight: 800; letter-spacing: .4px; }
.wcag-pass { background: #10b981; color: white; }
.wcag-fail { background: var(--danger-color); color: white; }

/* ── Quick-adjust Row ────────────────────── */
.accent-quick-row { display: flex; gap: 5px; flex-wrap: wrap; }
.accent-quick-btn {
    display: flex; flex-direction: column; align-items: center; gap: 2px;
    width: 54px; padding: 7px 4px;
    border: 1px solid var(--border-color); border-radius: var(--border-radius-xs);
    background: var(--input-bg); color: var(--text-muted); font-size: .6rem;
    cursor: pointer; transition: all .18s; text-align: center;
}
.accent-quick-btn:hover {
    border-color: var(--accent-color); color: var(--accent-color);
    background: color-mix(in srgb,var(--accent-color) 7%,var(--input-bg));
    transform: translateY(-2px);
}
.accent-quick-btn i { font-size: .82rem; }

/* ── Saved Palette Export / Import ───────── */
.accent-export-row { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; }

/* ── Recent History ──────────────────────── */
.accent-history-row { display: flex; gap: 5px; flex-wrap: wrap; align-items: center; }
.accent-history-item {
    width: 24px; height: 24px; border-radius: var(--border-radius-xs);
    cursor: pointer; border: 1.5px solid transparent;
    transition: transform .2s cubic-bezier(.34,1.56,.64,1), border-color .18s;
    position: relative; overflow: hidden; animation: swatchPop .3s ease both;
}
.accent-history-item:hover { transform: scale(1.2) translateY(-2px); border-color: rgba(255,255,255,.4); }
.accent-history-item::before {
    content: attr(data-hex);
    position: absolute; bottom: -18px; left:50%; transform: translateX(-50%);
    background: rgba(0,0,0,.75); color: white; font-size: .48rem;
    padding: 1px 4px; border-radius: 3px; white-space: nowrap;
    opacity:0; transition: bottom .18s, opacity .18s; pointer-events: none; font-family: monospace;
}
.accent-history-item:hover::before { bottom: 2px; opacity: 1; }

.accent-history-clear { font-size: .65rem; color: var(--text-muted); cursor: pointer; padding: 3px 6px; border: 1px solid transparent; border-radius: var(--border-radius-xs); transition: all .15s; }
.accent-history-clear:hover { border-color: var(--danger-color); color: var(--danger-color); }

/* ── CSS Variable Toggle ─────────────────── */
.accent-css-var-box {
    display: flex; align-items: center; gap: 8px;
    padding: 8px 10px; background: var(--highlight-color);
    border: 1px solid var(--border-color); border-radius: var(--border-radius-xs);
    font-family: 'JetBrains Mono',monospace; font-size: .72rem; color: var(--text-muted);
}
.accent-css-var-box code { color: var(--accent-color); font-size: .78rem; font-weight: 700; flex: 1; }

/* ── Color Blindness Simulator ───────────── */
.cb-sim-row { display: flex; gap: 6px; flex-wrap: wrap; }
.cb-sim-item {
    flex: 1; min-width: 80px; padding: 7px 8px; border-radius: var(--border-radius-xs);
    border: 1px solid var(--border-color); background: var(--input-bg);
    display: flex; flex-direction: column; gap: 5px;
}
.cb-sim-swatch {
    height: 20px; border-radius: 4px; transition: background .35s ease;
}
.cb-sim-label { font-size: .58rem; color: var(--text-muted); text-align: center; }

/* ── Toast ───────────────────────────────── */
.accent-toast {
    position: fixed; bottom: 2rem; left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--card-bg); border: 1px solid var(--border-color);
    border-radius: var(--border-radius-pill); padding: 8px 16px;
    font-size: .78rem; font-weight: 600; color: var(--text-color);
    box-shadow: var(--box-shadow-md); z-index: 99999;
    opacity: 0; transition: all .25s cubic-bezier(.34,1.56,.64,1);
    display: flex; align-items: center; gap: 7px; pointer-events: none; white-space: nowrap;
}
.accent-toast.show { opacity:1; transform: translateX(-50%) translateY(0); }
.accent-toast i { color: var(--accent-color); }

/* ── Fade-in util ───────────────────────── */
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

/* Responsive */
@media(max-width:560px) {
    .accent-rand-row    { flex-direction: column; }
    .contrast-grid      { grid-template-columns: 1fr; }
    .gradient-row       { grid-template-columns: 1fr; }
    .accent-picker-row  { flex-direction: column; }
    .harmony-name       { width: auto; }
    .accent-header-content { flex-direction: column; }
}
